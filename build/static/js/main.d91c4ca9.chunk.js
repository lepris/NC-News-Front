(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,a){e.exports=a.p+"static/media/error.ad3e845e.jpg"},24:function(e,t,a){e.exports=a(65)},29:function(e,t,a){},30:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),o=a.n(c),s=(a(29),a(1)),l=a(2),i=a(4),u=a(3),m=a(5),p=(a(30),a(8)),h=a(6),f=a.n(h),d=a(9),E=a(10),v=a.n(E),g="https://banana-crisp-75783.herokuapp.com/api",b=function(){var e=Object(d.a)(f.a.mark(function e(t){var a,n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("///fetching all articles in API"),a="",t&&(a="?topic=".concat(t)),e.next=5,v.a.get("".concat(g,"/articles/").concat(a));case 5:return n=e.sent,r=n.data.articles,e.abrupt("return",r);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(f.a.mark(function e(t){var a,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("hello from Article"),e.next=3,v.a.get("".concat(g,"/articles/").concat(t));case 3:return a=e.sent,n=a.data,e.abrupt("return",n);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(d.a)(f.a.mark(function e(t){var a,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Hello from fetchUser",t),e.next=3,v.a.get("".concat(g,"/users/").concat(t));case 3:return a=e.sent,n=a.data.userData,e.abrupt("return",n);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(f.a.mark(function e(t){var a,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("hello from comments api"),e.next=3,v.a.get("".concat(g,"/articles/").concat(t,"/comments"));case 3:return a=e.sent,n=a.data.comments,e.abrupt("return",n);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(d.a)(f.a.mark(function e(){var t,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat(g,"/topics"));case 2:return t=e.sent,a=t.data.topics,e.abrupt("return",a);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(d.a)(f.a.mark(function e(t){var a,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("comment votes up"),e.next=3,v.a.patch("".concat(g,"/comments/").concat(t),{inc_votes:1});case 3:return a=e.sent,n=a.data.votes,e.abrupt("return",n);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(d.a)(f.a.mark(function e(t){var a,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("comment votes up"),e.next=3,v.a.patch("".concat(g,"/comments/").concat(t),{inc_votes:-1});case 3:return a=e.sent,n=a.data.votes,e.abrupt("return",n);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(d.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("comment delete"),e.next=3,v.a.delete("".concat(g,"/comments/").concat(t));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(d.a)(f.a.mark(function e(t,a){var n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("comment post"),e.next=3,v.a.post("".concat(g,"/articles/").concat(t,"/comments"),a);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),D=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={article:{}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.article,t=new Date(e.created_at),a=t.getDate(),n=t.getMonth(),c=t.getFullYear();return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{class:"article-lis-title",to:"/articles/"+e.article_id},r.a.createElement("h2",null,e.title)),r.a.createElement("p",{className:"articles_lis_info"},r.a.createElement(p.a,{className:"article_lis_topic",to:"topics/".concat(e.topic)},"topics/",e.topic),r.a.createElement("i",{class:"fas fa-user-tag"}," "),e.author,r.a.createElement("i",{class:"fas fa-thumbs-up"})," ",e.votes,r.a.createElement("i",{class:"fas fa-comments"})," ",e.comment_count,r.a.createElement("i",{class:"fas fa-calendar-day"})," ","".concat(a," / ").concat(n," / ").concat(c)),r.a.createElement(p.a,{to:"/articles/"+e.article_id},r.a.createElement("button",{className:"button_small vote"},r.a.createElement("i",{class:"fas fa-book-open"}),"read more")))}}]),t}(n.Component),C=a(23),A=a.n(C),x=(a(59),function(e){var t=e.message;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"image"},r.a.createElement("img",{alt:"Life of Brian",src:A.a})),r.a.createElement("div",{className:"text_part"},r.a.createElement("h2",null,"Big Fat Error"),r.a.createElement("h4",null,t),r.a.createElement("p",null,"Some things in life are bad,"),r.a.createElement("p",null,"They can really make you mad,"),r.a.createElement("p",null,"Other things just make you swear and curse,"),r.a.createElement("p",null,"When you're chewing life's gristle,"),r.a.createElement("p",null,"Don't grumble,"),r.a.createElement("p",null,"Give a whistle"),r.a.createElement("p",null,r.a.createElement("small",null,"-Monthy Python"))))}),T=function(e){var t=e.chooseTopic,a=e.topic,n=e.reload;return r.a.createElement(p.a,{to:"/topics/".concat(a.slug)},r.a.createElement("button",{onClick:function(e){e.preventDefault(),n(a.slug),t(a.slug)}},a.description))},B=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!1,topics:["football","coding"]},a.getTopics=function(){j().then(function(e){return a.setState({topics:e})})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getTopics()}},{key:"render",value:function(){var e=this;return this.state.loading?r.a.createElement("p",null,"Loading..."):r.a.createElement(r.a.Fragment,null,this.state.topics.map(function(t){return r.a.createElement(T,{chooseTopic:e.props.chooseTopic,reload:e.props.reload,topic:t})}))}}]),t}(n.Component),I=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={articlesList:[],loading:!0,err:!1,errMSG:""},a.reloadArticlesWithTopic=function(e){a.getArticles(e)},a.getArticles=function(e){b(e).then(function(e){a.setState({articlesList:e,loading:!1})}).catch(function(e){return a.setState({err:!0,errMSG:e.message})})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getArticles(this.props.topic)}},{key:"render",value:function(){return this.state.err?r.a.createElement(x,{message:this.state.errMSG}):this.state.loading?r.a.createElement("div",null,"Loading..."):r.a.createElement(r.a.Fragment,null,"  ",r.a.createElement(B,{reload:this.reloadArticlesWithTopic,chooseTopic:this.props.chooseTopic}),r.a.createElement("h1",null,this.props.topic||"all"," articles section"),r.a.createElement("div",null,this.state.articlesList.map(function(e,t){return r.a.createElement(D,{key:t,article:e})})))}}]),t}(n.Component),L=(a(60),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={authorData:{}},a.getAuthor=function(){w(a.props.username).then(function(e){return a.setState({authorData:e})})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getAuthor()}},{key:"render",value:function(){return console.log(this.state.authorData),r.a.createElement("div",{className:"article_author_container"},r.a.createElement("div",{className:"avatar_big"},r.a.createElement("img",{alt:"Article authors avatar",src:this.state.authorData.avatar_url})),r.a.createElement("div",{className:"article_author_name"},this.state.authorData.name))}}]),t}(n.Component)),M=function(e){var t=e.art,a=new Date(t.created_at),n=a.getDate(),c=a.getMonth(),o=a.getFullYear();return r.a.createElement(r.a.Fragment,null,t.author&&r.a.createElement(L,{username:t.author}),r.a.createElement("h1",null,t.title),r.a.createElement("p",null,"created at:",r.a.createElement("date",null," ","".concat(n," / ").concat(c," / ").concat(o))),r.a.createElement("div",null,t.body))},P=(a(61),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={comment:{},votesInc:0},a.handleVoteUp=function(){k(a.state.comment.comment_id).then(function(e){return a.setState({votesInc:1})})},a.handleVoteDown=function(){N(a.state.comment.comment_id).then(function(e){return a.setState({votesInc:-1})})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.comment;this.setState({comment:e})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement("button",{className:"vote",hidden:1===this.state.votesInc,onClick:this.handleVoteUp},"vote",r.a.createElement("i",{class:"fas fa-thumbs-up"})),r.a.createElement("big",{className:"votes_number"},this.state.comment.votes+this.state.votesInc),r.a.createElement("button",{className:"vote",hidden:-1===this.state.votesInc,onClick:this.handleVoteDown},"Vote ",r.a.createElement("i",{class:"fas fa-thumbs-down"}))))}}]),t}(n.Component)),F=(a(62),function(e){var t=e.comment,a=e.handleDelete,n=e.username,c=new Date(t.created_at),o=c.getDate(),s=c.getMonth(),l=c.getFullYear();return r.a.createElement("div",{className:"comment_box"},r.a.createElement("p",null,t.body),r.a.createElement("p",{className:"comment_author_date"},"created by: ",r.a.createElement("i",{class:"fas fa-user-tag"})," ",t.author,"\xa0 \xa0 created at:\xa0",r.a.createElement("i",{class:"fas fa-calendar-day"}),"\xa0","".concat(o," / ").concat(s," / ").concat(l)," "),n===t.author?r.a.createElement("button",{onClick:function(){a(t.comment_id)},className:"vote"},r.a.createElement("i",{class:"fas fa-comment-slash"}),"DELETE"):r.a.createElement("p",{className:"info_message"}," ",r.a.createElement("i",{class:"fas fa-info-circle"})," You can only vote on others comments"),n!==t.author?r.a.createElement(P,{comment:t}):r.a.createElement("p",{className:"info_message"}," ",r.a.createElement("i",{class:"fas fa-info-circle"})," You can only vote on others comments"),r.a.createElement("hr",null))}),U=(a(63),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={author:"",tempBody:"",typingErr:!0},a.handleBodyChange=function(e){e.preventDefault(),a.state.tempBody.length>10&&a.setState({typingErr:!1}),a.state.tempBody.length<10&&a.setState({typingErr:!0}),a.setState({tempBody:e.target.value})},a.handleSubmit=function(e){e.preventDefault();var t=a.props,n=t.handlePost,r=t.username;n({body:a.state.tempBody,author:r}),a.setState({author:"",tempBody:"",typingErr:!0})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("form",null,r.a.createElement("h3",null,"NEW COMMENT:"),r.a.createElement("textarea",{type:"text",placeholder:"Comment Body",value:this.state.tempBody,onChange:this.handleBodyChange}),this.state.typingErr?r.a.createElement("span",{className:"error_message fail"}," comment is too short :("):r.a.createElement("span",{className:"error_message success"}," Valid comment"),r.a.createElement("button",{type:"submit",disabled:this.state.typingErr,onClick:this.handleSubmit},"Add"))}}]),t}(n.Component)),V=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={comments:[],updateComments:0},a.getCommentsByArtId=function(){O(a.props.artId).then(function(e){return a.setState({comments:e})})},a.handleDelete=function(e){_(e).then(a.setState({updateComments:1})).then(function(){return O(a.props.artId)}).then(function(e){return a.setState({comments:e})})},a.handlePost=function(e){S(a.props.artId,e).then(function(){return O(a.props.artId)}).then(function(e){return a.setState({comments:e})})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getCommentsByArtId()}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.props.username.length>2?r.a.createElement(U,{username:this.props.username,handlePost:this.handlePost}):r.a.createElement("p",{className:"info_message"},r.a.createElement("i",{class:"fas fa-info-circle"}),"Please Log in to add comments"),this.state.comments.length>0?this.state.comments.map(function(t){return r.a.createElement(F,{key:t.comment_id,username:e.props.username,comment:t,handleDelete:e.handleDelete})}):r.a.createElement("h4",null,"'Sorry No comments for this article'"))}}]),t}(n.Component),Y=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={article:{},loading:!0},a.getArticleById=function(){y(a.props.article_id).then(function(e){return a.setState({article:e,loading:!1})})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getArticleById()}},{key:"render",value:function(){return this.state.loading?r.a.createElement("p",null,"Loading..."):r.a.createElement(r.a.Fragment,null,r.a.createElement(M,{art:this.state.article}),this.state.article.article_id&&r.a.createElement(V,{username:this.props.username,artId:this.state.article.article_id}))}}]),t}(n.Component),W=(a(64),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={inputName:"",inputPassword:"",nameErr:!1,passwdErr:!1},a.handleUserChange=function(e){e.preventDefault(),a.setState({inputName:e.target.value,nameErr:!1})},a.handlePasswDChange=function(e){e.preventDefault(),a.setState({inputPassword:e.target.value})},a.formBehaviour=function(e){e.preventDefault()},a.handleSubmit=function(e){var t=a.props.userLogin;e.preventDefault(),w(a.state.inputName).then(function(e){return e.username===a.state.inputName?e:0}).catch(function(e){return a.setState({nameErr:!0,inputPassword:""})}),w(a.state.inputName).then(function(e){return e.password===a.state.inputPassword?t(e.username):0}).catch(function(e){return a.setState({passwdErr:!0})})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{className:"form_login",onSubmit:this.formBehaviour},r.a.createElement("h3",null,"LOG IN:"),this.state.nameErr&&r.a.createElement("span",{className:"login_message"},"Your Username is incorrect :("),r.a.createElement("label",{className:"label_login",htmlFor:"inputName"},"username: "),r.a.createElement("input",{type:"text",name:"inputName",onChange:this.handleUserChange,placeholder:"Username"}),this.state.passErr&&r.a.createElement("p",null,"Your Password is incorrect :("),r.a.createElement("label",{className:"label_login",htmlFor:"password"},"password:"),r.a.createElement("input",{type:"password",name:"password",onChange:this.handlePasswDChange,placeholder:"Password"}),r.a.createElement("button",{onClick:this.handleSubmit},"Submit"))}}]),t}(n.Component)),G=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={topics:[],newTopic:!1},a.getTopics=function(){j().then(function(e){return a.setState({topics:e})})},a.handleChange=function(e){e.preventDefault();var t=e.target.value;"Add New"===t?a.setState({newTopic:!0}):a.setState({topic:t,newTopic:!1})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getTopics()}},{key:"render",value:function(){return r.a.createElement("form",null,r.a.createElement("h3",null,"Lets add an article"),r.a.createElement("fieldset",null,r.a.createElement("h4",null,"Topic:"),r.a.createElement("select",{onChange:this.handleChange},r.a.createElement("option",null,"Select your topic"),r.a.createElement("option",{value:"Add New"}," Add New Topic"),this.state.topics.map(function(e){return r.a.createElement("option",{value:e.slug},e.slug)}))),r.a.createElement("hr",null),this.state.newTopic&&r.a.createElement("fieldset",null,r.a.createElement("h4",null,"Add New Topic"),r.a.createElement("input",{type:"text",placeholder:"topic name"}),r.a.createElement("input",{type:"text",placeholder:"topic description"}),r.a.createElement("button",{type:"submit",className:"vote"},"Submit new topic")))}}]),t}(n.Component),H=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",topic:""},a.userLogin=function(e){a.setState({username:e})},a.chooseTopic=function(e){a.setState({topic:e})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("nav",null,r.a.createElement(p.a,{to:"/"},"Home View"),!this.state.username&&r.a.createElement(W,{userLogin:this.userLogin}),this.state.username&&r.a.createElement("h5",null,"Logged in as ",this.state.username,"  ",r.a.createElement(p.a,{to:"/articles/add"}," ",r.a.createElement("i",{class:"fas fa-pencil-alt"}),"Add Article"))),r.a.createElement(p.b,{className:"App-main-route"},r.a.createElement(G,{username:this.state.username,path:"/articles/add"}),r.a.createElement(I,{chooseTopic:this.chooseTopic,path:"/"}),r.a.createElement(I,{chooseTopic:this.chooseTopic,path:"/topics/:topic"}),r.a.createElement(Y,{username:this.state.username,path:"/articles/:article_id"})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[24,1,2]]]);
//# sourceMappingURL=main.d91c4ca9.chunk.js.map